# 常见问题

::: tip 提示
在阅读本页面之前，请先阅读[功能说明](/zh/guide/features)了解各功能的注意事项。
:::

## ❓ 工作原理

### 程序的工作原理是什么？

::: info 原理解析
本程序利用了游戏引擎的渲染机制和 Windows 系统的窗口管理特性：

#### 1️⃣ 渲染机制
- 在大多数使用现代游戏引擎（如UE4/5、Unity等）开发的游戏中，窗口模式或无边框窗口模式下的渲染分辨率通常由窗口尺寸决定
  ```ts
  // UE4/5引擎示例
  r.ScreenPercentage // 控制实际渲染分辨率与窗口分辨率的比例
  ```
- 当进行窗口尺寸调整时，游戏引擎会根据新的窗口尺寸重新计算渲染分辨率（这是很多游戏引擎的默认行为）
- 即使窗口尺寸超出了显示器的物理大小，游戏引擎仍然会按照实际的窗口大小进行完整的渲染过程
- 这使得在拍照画质设置为"窗口分辨率"时，可以输出超高分辨率的截图

#### 2️⃣ 窗口管理
- 程序通过 Windows 系统标准的窗口管理API调整窗口尺寸和样式
  ```cpp
  // Windows API 核心调用
  SetWindowPos()    // 调整窗口大小和位置
  WS_POPUP         // 需要时切换为无边框样式
  ```
- 当窗口需要超出屏幕范围时，会自动切换为无边框样式(Alt+Enter可恢复)
- 这些操作等同于系统标准行为：
  - 📱 系统分辨率变更时的窗口自适应
  - 🔄 屏幕旋转时的窗口重排
  - 🖥️ 多显示器下的窗口移动

#### 3️⃣ 安全性
程序不会：
::: danger 禁止行为
- 修改游戏内存
- 注入游戏进程
- 修改游戏文件
:::

## ❌ 常见错误与解决方案

### 管理员运行后无反应

::: warning 问题描述
右键以管理员身份运行程序后没有任何反应，也没有浮窗弹出。如：[Issue](https://github.com/ChanIok/SpinningMomo/issues/5)
:::

**解决方案**：
1. 查看 Windows 安全中心的保护历史记录，检查是否有相关拦截信息，有则尝试关闭保护
2. 尝试重新安装运行库：[Visual C++ Redistributable 2015-2022](https://aka.ms/vs/17/release/vc_redist.x64.exe)
3. 换个渠道重新下载程序并运行

### 窗口调整失败

::: warning 错误提示
窗口调整失败。可能需要管理员权限，或窗口不支持调整大小。
:::

**解决方案**：右键程序图标，选择"以管理员身份运行"

### 热键注册失败

::: warning 错误提示
热键注册失败。程序仍可使用，但快捷键将不可用。
:::

**解决方案**：右键系统托盘的程序图标，打开菜单，点击"修改热键"，键盘输入其他未被占用的热键组合

### 高分辨率拍照后画质未提升

::: warning 问题描述
在无限暖暖中选择高分辨率预设后拍照，但最终截图画质没有明显提升。
:::

**解决方案**：进入游戏设置，确认"拍照-照片画质"选项已设置为"窗口分辨率"而非"4K"或其他。

### 预览窗或叠加层功能引发崩溃

::: info 注意
尽管作者在多种环境下进行了测试，但由于硬件和系统配置差异，个别情况下仍可能出现问题。
:::

**解决方案**：如果遇到无法解决的崩溃，请通过 [GitHub Issues](https://github.com/ChanIok/SpinningMomo/issues) 提供详细的系统信息和崩溃前操作步骤，以便开发者定位和解决问题

## 🎮 无限暖暖使用建议

### 动态场景拍照问题

::: warning 问题描述
- 在无限暖暖中，使用键盘空格键拍照可能导致截图细节模糊、锯齿或纹理不清晰
- 某些动态场景（如花焰群岛的旋转木马）下拍照尤其容易出现细节模糊、锯齿或纹理不清晰的情况
:::

**解决方案**：
- 为获得高质量截图，建议使用预览窗或叠加层功能，**通过鼠标点击游戏内拍照按钮进行拍摄**
  - 是的，叠纸的技术力就是这么烂，空格键拍照有 BUG
- 也可以通过修改游戏配置文件，强制游戏以100%分辨率渲染：`[SystemSettings] r.ScreenPercentage=100`

### 画面错位问题

::: warning 问题描述
在全屏窗口模式下，当从小于屏幕的尺寸（如屏幕1080P，窗口720P）切换到超出屏幕尺寸时，可能导致游戏画面错位。
:::

**解决方案**：在游戏设置中切换到 **窗口模式**，或直接按 Alt+Enter 切换到窗口模式后再调整尺寸

### 录制超大窗口

::: tip 建议
- 使用 [OBS](https://obsproject.com/) 可以完整捕获超出屏幕范围的游戏窗口
- 在"来源"中添加"游戏捕获"或"窗口捕获"，选择无限暖暖窗口
- 每次使用 SpinningMomo 调整游戏窗口分辨率或比例后，需要在 OBS 中右键点击"调整输出大小（源大小）"以匹配新的窗口尺寸
:::

## 💬 获取帮助

如果您遇到的问题在此页面没有找到解决方案，您可以：

::: tip 寻求帮助的方式
- 在 [GitHub Issues](https://github.com/ChanIok/SpinningMomo/issues) 提交问题
:::

::: warning 提交问题时请注意
提供以下信息有助于我们更好地帮助您：
- 系统版本
- 问题的详细描述
- 复现步骤
- 相关的错误信息
:::
